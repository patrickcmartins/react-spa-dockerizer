version: '3.8'

services:
  react-spa:
    build: .
    ports:
      - "3000:80"
    environment:
      - NODE_ENV=production
    restart: unless-stopped
    volumes:
      - ./app:/app  # Mount your app directory for development
    # For development with hot reload:
    # command: sh -c "npm start"
    # stdin_open: true
    # tty: true

  # Example with reverse proxy for multiple apps:
  nginx-proxy:
    image: nginx:alpine
    ports:
      - "80:80"
    volumes:
      - ./nginx/multi-app.conf:/etc/nginx/conf.d/default.conf
      - ./app1/build:/usr/share/nginx/html/app1
      - ./app2/build:/usr/share/nginx/html/app2
    depends_on:
      - react-spa